<div class="file-uploader" [class.disabled]="disabled">
  
  <!-- Drop Zone -->
  <div class="drop-zone"
       [class.drag-over]="isDragOver"
       [class.uploading]="isUploading"
       (dragover)="onDragOver($event)"
       (dragleave)="onDragLeave($event)"
       (drop)="onDrop($event)"
       (click)="openFileDialog()">
    
    <!-- Upload Icon -->
    <div class="upload-icon" *ngIf="!isUploading">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="17,8 12,3 7,8"></polyline>
        <line x1="12" y1="3" x2="12" y2="15"></line>
      </svg>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-spinner" *ngIf="isUploading">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M21 12a9 9 0 11-6.219-8.56"/>
      </svg>
    </div>

    <!-- Upload Text -->
    <div class="upload-text">
      <p class="main-text" *ngIf="!isUploading">{{ placeholder }}</p>
      <p class="main-text" *ngIf="isUploading">Uploading files...</p>
      <button type="button" class="choose-file-btn" *ngIf="!isUploading && !disabled">
        Choose file
      </button>
    </div>

    <!-- Hidden File Input -->
    <input #fileInput
           type="file"
           [accept]="acceptedTypes"
           [multiple]="multiple"
           [disabled]="disabled"
           style="display: none"
           (change)="onFileInputChange($event)">
  </div>

  <!-- File Preview List -->
  <div class="file-preview-list" *ngIf="uploadedFiles.length > 0">
    <h4 class="preview-title">Uploaded Files</h4>
    
    <div class="file-item" *ngFor="let file of uploadedFiles; let i = index">
      <div class="file-preview">
        <img *ngIf="file.type.startsWith('image/')" 
             [src]="file.preview" 
             [alt]="file.name"
             class="file-thumbnail">
        <div *ngIf="!file.type.startsWith('image/')" class="file-icon">
          {{ getFileTypeIcon(file.type) }}
        </div>
      </div>
      
      <div class="file-info">
        <div class="file-name">{{ file.name }}</div>
        <div class="file-details">
          {{ formatFileSize(file.size) }} â€¢ {{ file.type }}
        </div>
      </div>
      
      <button type="button" 
              class="remove-file-btn"
              (click)="removeFile(i)"
              title="Remove file">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>

</div>
