<header class="main-header" (click)="onDocumentClick($event)">
  <div class="header-container">
    <!-- Product Name -->
    <div class="product-name">
      <h1>{{ productName }}</h1>
    </div>

               <!-- Search Bar -->
           <div class="search-container">
             <form class="search-form" (submit)="onSearchSubmit($event)">
               <div class="search-input-wrapper">
                 <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                   <circle cx="11" cy="11" r="8"></circle>
                   <path d="m21 21-4.35-4.35"></path>
                 </svg>

                 <input
                   #searchInput
                   type="text"
                   class="search-input"
                   placeholder="Search Courses"
                   [(ngModel)]="searchQuery"
                   (input)="onSearchInput($event)"
                   (focus)="onSearchFocus()"
                   (blur)="onSearchBlur()"
                 >

                 <button
                   *ngIf="searchQuery"
                   class="clear-search-btn"
                   (click)="clearSearch()"
                   type="button"
                 >
                   <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                     <line x1="18" y1="6" x2="6" y2="18"></line>
                     <line x1="6" y1="6" x2="18" y2="18"></line>
                   </svg>
                 </button>

                 <button type="submit" class="search-submit-btn" [disabled]="!searchQuery.trim()">
                   <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                     <circle cx="11" cy="11" r="8"></circle>
                     <path d="m21 21-4.35-4.35"></path>
                   </svg>
                 </button>
               </div>
             </form>

      <!-- Search Dropdown -->
      <div 
        *ngIf="isSearchFocused && searchResults.length > 0" 
        class="search-dropdown"
      >
        <div 
          *ngFor="let course of searchResults" 
          class="search-result-item"
          (click)="selectCourse(course)"
        >
          <img [src]="course.thumbnailUrl" [alt]="course.title" class="result-thumbnail">
          <div class="result-content">
            <div class="result-title">{{ course.title }}</div>
            <div class="result-provider">{{ course.provider.name }}</div>
            <div class="result-meta">
              <span class="result-rating">{{ course.rating }}â˜…</span>
              <span class="result-difficulty">{{ course.difficulty }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Side - Notifications and Profile -->
    <div class="header-actions">
      <!-- Notification Icon -->
      <div class="notification-container">
        <button class="notification-btn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
          </svg>
          <span class="notification-badge">3</span>
        </button>
      </div>

      <!-- User Profile -->
      <div class="user-profile-container">
        <button 
          class="user-profile-btn"
          (click)="toggleUserDropdown()"
          *ngIf="currentUser"
        >
          <img [src]="currentUser.avatarUrl" [alt]="currentUser.fullName" class="user-avatar">
        </button>

        <!-- User Dropdown -->
        <div 
          *ngIf="showUserDropdown && currentUser" 
          class="user-dropdown"
        >
          <!-- User Info Header -->
          <div class="user-dropdown-header">
            <img [src]="currentUser.avatarUrl" [alt]="currentUser.fullName" class="dropdown-avatar">
            <div class="user-info">
              <div class="user-name">{{ currentUser.fullName }}</div>
              <div class="user-role">{{ currentUser.track || currentUser.role }}</div>
            </div>
          </div>

          <div class="dropdown-divider"></div>

          <!-- Navigation Links -->
          <div class="dropdown-menu">
            <button class="dropdown-item" (click)="navigateToProfile()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              My Profile
            </button>

            <button class="dropdown-item" (click)="navigateToAdminConsole()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="9" y1="9" x2="15" y2="15"></line>
                <line x1="15" y1="9" x2="9" y2="15"></line>
              </svg>
              Admin Console
            </button>

            <button class="dropdown-item" (click)="navigateToMyCourses()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
              </svg>
              My Courses
            </button>

            <button class="dropdown-item" (click)="navigateToBlog()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14,2 14,8 20,8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10,9 9,9 8,9"></polyline>
              </svg>
              Blog
            </button>

            <div class="dropdown-divider"></div>

            <button class="dropdown-item logout-item" (click)="logout()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16,17 21,12 16,7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Log Out
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</header> 