<div class="my-courses-page">
  <!-- Header -->
  <app-header></app-header>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Loading your courses...</p>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading" class="my-courses-content">
    
    <!-- Page Header -->
    <div class="page-header">
      <div class="header-container">
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb">
          <a (click)="navigateToHome()" class="breadcrumb-link">Home</a>
          <svg class="breadcrumb-separator" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="9,18 15,12 9,6"></polyline>
          </svg>
          <span class="breadcrumb-current">My Courses</span>
        </nav>

        <!-- Page Title and Actions -->
        <div class="title-section">
          <h1 class="page-title">My Courses</h1>
          <button class="create-new-btn" (click)="createNewCourse()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            Create New
          </button>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
          <button *ngFor="let tab of tabs"
                  class="tab-btn"
                  [class.active]="activeTab === tab.id"
                  (click)="onTabClick(tab.id)">
            {{ tab.label }}
            <span class="tab-count">({{ tab.count }})</span>
          </button>
        </div>

        <!-- Search and Sort Controls -->
        <div class="controls-section">
          
          <!-- Search Input -->
          <div class="search-container">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input
              type="text"
              placeholder="Search course"
              class="search-input"
              [(ngModel)]="searchQuery"
              (input)="onSearchChange()">
          </div>

          <!-- Sort Dropdown -->
          <div class="sort-container">
            <label class="sort-label">Sort:</label>
            <select 
              class="sort-select"
              [(ngModel)]="sortBy"
              (change)="onSortChange()">
              <option *ngFor="let option of sortOptions" [value]="option.value">
                {{ option.label }}
              </option>
            </select>
          </div>

        </div>
      </div>
    </div>

    <!-- Course Grid -->
    <div class="courses-section">
      <div class="courses-container">
        
        <!-- Empty State -->
        <div *ngIf="filteredCourses.length === 0 && !isLoading" class="empty-state">
          <div class="empty-icon">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
          </div>
          <h3 class="empty-title">
            <span *ngIf="searchQuery">No courses found for "{{ searchQuery }}"</span>
            <span *ngIf="!searchQuery">No {{ activeTab.toLowerCase() }} courses yet</span>
          </h3>
          <p class="empty-description">
            <span *ngIf="searchQuery">Try adjusting your search terms or check other tabs.</span>
            <span *ngIf="!searchQuery && activeTab === 'Published'">Create and publish your first course to get started.</span>
            <span *ngIf="!searchQuery && activeTab === 'Draft'">No draft courses found. Start creating a new course!</span>
            <span *ngIf="!searchQuery && activeTab === 'Archived'">No archived courses found.</span>
          </p>
          <button *ngIf="!searchQuery" class="create-course-btn" (click)="createNewCourse()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            Create New Course
          </button>
        </div>

        <!-- Course Grid -->
        <div *ngIf="filteredCourses.length > 0" class="courses-grid">
          <div *ngFor="let course of filteredCourses" 
               class="course-item" 
               (click)="onCourseCardClick(course)">
            
            <!-- Course Thumbnail -->
            <div class="course-thumbnail">
              <img [src]="course.thumbnailUrl" [alt]="course.title" class="thumbnail-image">
              
              <!-- Status Badge -->
              <div class="status-badge" [ngClass]="getStatusBadgeClass(course.status)">
                {{ course.status }}
              </div>
            </div>

            <!-- Course Content -->
            <div class="course-content">
              
              <!-- Course Title -->
              <h3 class="course-title">{{ course.title }}</h3>
              
              <!-- Course Stats -->
              <div class="course-stats">
                <div class="stat-item">
                  <span class="stat-value">{{ course.rating }}</span>
                  <div class="stars">
                    <span *ngFor="let star of [1,2,3,4,5]" 
                          class="star" 
                          [class.filled]="star <= course.rating">
                      ★
                    </span>
                  </div>
                  <span class="stat-label">({{ course.reviewCount | number }} reviews)</span>
                </div>
                
                <div class="stat-item">
                  <span class="stat-label">{{ course.enrollmentCount | number }} Enrolled</span>
                </div>
              </div>

              <!-- Course Meta -->
              <div class="course-meta">
                <div class="meta-item">
                  <span class="meta-label">{{ course.difficulty }}</span>
                  <span class="meta-separator">•</span>
                  <span class="meta-label">{{ course.durationText }}</span>
                </div>
                
                <div class="course-dates">
                  <div class="date-item">
                    <span class="date-label">Created:</span>
                    <span class="date-value">{{ formatDate(course.createdDate) }}</span>
                  </div>
                  <div class="date-item">
                    <span class="date-label">Updated:</span>
                    <span class="date-value">{{ formatDate(course.lastUpdated) }}</span>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>
